---
title: Nginx 配置
date: 2024-10-20 22:22:54
categories: 记录
tags: termux
---
<!-- more -->

# 安装Nginx

termux 通过指令：`pkg install nginx`来安装nginx,安装目录为：`/data/data/com.termux/files/usr/etc/nginx`

我们打开nginx的目录，可以看到有几个文件：

![1729435016062](image/20241020_222254/1729435016062.webp)

其中 `nginx.conf`是我们需要主要了解的，这是nginx的配置文件。

但是如果我们只是想通过nginx简单的帮我们代理一个网页，那么我们需要调整的部分很少，几乎只有几个部分需要修改：

1. 端口号
   ![1729435229672](image/20241020_222254/1729435229672.webp)
   server 中 listen 后面的数字，是我们要nginx监听的端口号，默认是8080，这里我修改成了4040。
2. 文件根目录
   ![1729435318208](image/20241020_222254/1729435318208.webp)
   location 中 root 后面的参数是需要代理的文件根目录，就是我们网页所在的目录路径
   index 后面的参数展示的主页，这里我们主页的文件为：index.html。

配置好这两个参数后，我们就可以在终端中输入 `nginx`,启动服务，如果已经启动，可以通过指令 `nginx -s reload` 来让nginx重新加载配置重新启动。然后我们就可以通过ip:4040来访问通过nginx 代理的页面。经过实测，用nginx代理hexo的页面，比通过hexo自带的框架，页面的访问速度大大提升。

![1729435737003](image/20241020_222254/1729435737003.webp)

# Nginx 常用指令

### 启动Nginx

直接输入Nginx就行

```
nginx
```

### 检查nginx配置文件

```
nginx -t
```

### 重启

```
nginx -s reload

```

### 关闭

直接关闭nginx

```
nginx -s stop
```

有序停止nginx，等待所有请求结束后再关闭nginx

```
nginx -s quit
```

# Nginx 同时启动多个server

想要用nginx在一个设备上同时代理多个页面，需要添加多个server。

![1729436922077](image/20241020_222254/1729436922077.webp)

我们把第二个页面用端口号8888监听，同样填好参数，然后让nginx 导入参数重启，两个主页就都在nginx的代理下了。

# Nginx 开启配置ipv6

在网上看到很多nginx默认是不带ipv6功能的，但是经过实测，termux 通过pkg 安装的nginx是默认支持ipv6的，所以要想监听ipv6端口，我们只需要在config文件中添加ipv6参数即可，如下：

![1729503433375](image/20241020_222254/1729503433375.webp)

添加一个listen `[::]`表示ipv6地址，后边加上 `:端口号`，就表示监听ipv6地址的某某端口号。

按照惯例接下来执行 `nginx -s reload` 来导入参数重启运行就可，然后我们就可以通过ipv6地址来访问我们的页面了。












