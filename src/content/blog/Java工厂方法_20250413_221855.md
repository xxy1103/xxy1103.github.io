---
title: Javaå·¥å‚æ–¹æ³•
date: 2025-04-13 22:18:55
categories: ç¬”è®°
tags: java
---
# æ¯æ—¥ä¸€è¨€


æ²¡æœ‰ä»€ä¹ˆæ˜¯å®Œç¾çš„ï¼Œè¿™ä¸ªä¸–ç•Œå¹¶ä¸å®Œç¾ï¼Œæ‰€ä»¥æ‰æ˜¾å¾—ç¾ä¸½ã€‚â€”â€”ã€Šé’¢ä¹‹ç‚¼é‡‘æœ¯å¸ˆã€‹

<!-- more -->


# ä»€ä¹ˆæ˜¯å·¥å‚æ–¹æ³•(Factory Method)

Javaä¸­çš„å·¥å‚æ–¹æ³•æ˜¯ä¸€ç§åˆ›å»ºå¯¹è±¡çš„è®¾è®¡æ¨¡å¼ï¼Œå±äº**åˆ›å»ºæ¨¡å¼**ä¹‹ä¸€ã€‚å·¥å‚æ–¹æ³•é€šè¿‡å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹å°è£…èµ·æ¥ï¼Œä½¿å¾—å®¢æˆ·ç«¯ä»£ç ä¸éœ€è¦çŸ¥é“å…·ä½“çš„ç±»ï¼Œè€Œæ˜¯é€šè¿‡å·¥å‚æ–¹æ³•æ¥è·å–æ‰€éœ€çš„å¯¹è±¡ã€‚

ä¸»è¦ç‰¹ç‚¹ï¼š

* **å®šä¹‰æ¥å£**ï¼šå·¥å‚æ–¹æ³•å®šä¹‰äº†åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†å°†å®é™…åˆ›å»ºå¯¹è±¡çš„å·¥ä½œäº¤ç»™å­ç±»å»å®Œæˆã€‚
* **å­ç±»å†³å®šå¯¹è±¡**ï¼šé€šè¿‡ç»§æ‰¿å·¥å‚ç±»å¹¶å®ç°å·¥å‚æ–¹æ³•ï¼Œå­ç±»å¯ä»¥å†³å®šå…·ä½“åˆ›å»ºå“ªä¸ªç±»çš„å®ä¾‹ã€‚
* **è§£è€¦å¯¹è±¡åˆ›å»º**ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„ç±»ï¼Œåªéœ€è¦é€šè¿‡å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼Œä»è€Œå®ç°äº†ä»£ç çš„è§£è€¦å’Œæ‰©å±•æ€§ã€‚

# å¦‚ä½•å†™å¥½ä¸€ä¸ªå·¥å‚æ–¹æ³•

## ç¬¬ä¸€æ­¥ï¼šå®šä¹‰äº§å“çš„æŠ½è±¡æ¥å£æˆ–æŠ½è±¡ç±»

äº§å“æ˜¯ç”±å·¥å‚åˆ›å»ºçš„å¯¹è±¡(å®ä¾‹)ï¼Œå¹¶ä¸”ä»–ä»¬éƒ½å®ç°äº†åŒä¸€ä¸ªæŠ½è±¡æ¥å£æˆ–çˆ¶ç±»ã€‚è¿™ä¸ªæŠ½è±¡ç±»ä¸­åº”è¯¥åŒ…å«æ‰€æœ‰äº§å“è‡³å°‘åº”è¯¥å®ç°çš„æ¥å£ã€‚

ğŸ“Œ ä¸¾ä¸ªä¾‹å­ï¼š

å‡è®¾ä½ æœ‰ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§é€šçŸ¥æ–¹å¼ï¼š

| é€šçŸ¥æ–¹å¼ | ç±»å                   | å±äºâ€œäº§å“â€å—ï¼Ÿ |
| -------- | ---------------------- | ---------------- |
| å‘é€é‚®ä»¶ | `EmailNotification`  | âœ… æ˜¯äº§å“        |
| å‘é€çŸ­ä¿¡ | `SMSNotification`    | âœ… æ˜¯äº§å“        |
| å‘é€å¾®ä¿¡ | `WeChatNotification` | âœ… æ˜¯äº§å“        |

å®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„â€œçˆ¶ç±»â€æˆ–â€œæ¥å£â€ï¼š

```java
interface Notification {
    void send(String message);
}
```

## ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå¤šä¸ªå…·ä½“çš„äº§å“å®ç°ç±»

è¿™äº›ç±»æ˜¯å®é™…çš„äº§å“ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å®ç°æˆ‘ä»¬æ‰€éœ€è¦çš„æ¯ä¸ªäº§å“çš„å…·ä½“å®ç°ã€‚

```java
class EmailNotification implements Notification {
    public void send(String message) {
        System.out.println("å‘é€é‚®ä»¶: " + message);
    }
}

class SMSNotification implements Notification {
    public void send(String message) {
        System.out.println("å‘é€çŸ­ä¿¡: " + message);
    }
}

```

## ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰ä¸€ä¸ªæŠ½è±¡å·¥å‚æˆ–æ¥å£

æŠ½è±¡å·¥å‚æè¿°äº†åˆ›å»ºäº§å“çš„æ–¹æ³•ï¼š

```java
abstract class NotificationFactory {
    public abstract Notification createNotification();
}
```

ä¹Ÿå¯ä»¥æ˜¯æ¥å£ï¼š

```java
interface NotificationFactory {
    Notification createNotification();
}
```

## ç¬¬å››æ­¥ï¼šå®ç°å…·ä½“çš„å·¥å‚å­ç±»

æ¯ä¸ªå­ç±»è´Ÿè´£åˆ›å»ºä¸€ä¸ªå…·ä½“çš„äº§å“ï¼š

```java
class EmailFactory extends NotificationFactory {
    public Notification createNotification() {
        return new EmailNotification();
    }
}

class SMSFactory extends NotificationFactory {
    public Notification createNotification() {
        return new SMSNotification();
    }
}
```

## ç¬¬äº”æ­¥ï¼šæ·»åŠ ä¸€ä¸ªå·¥å‚é€‰æ‹©å™¨ï¼ˆç”¨äºæ ¹æ®ä¸åŒç±»å‹è¿”å›ä¸åŒå·¥å‚ï¼‰

```java
NotificationFactoryProvider {
    public static NotificationFactory getFactory(String type) {
        switch (type.toLowerCase()) {
            case "email": return new EmailFactory();
            case "sms": return new SMSFactory();
            default: throw new IllegalArgumentException("æœªçŸ¥é€šçŸ¥ç±»å‹");
        }
    }
}

```

## ç¬¬å…­æ­¥ï¼šå®¢æˆ·ç«¯ä½¿ç”¨å·¥å‚é€‰æ‹©å™¨è·å–å¯¹è±¡

```java
public class Main {
    public static void main(String[] args) {
        //å®¢æˆ·ç«¯ä¸å…³å¿ƒå…·ä½“çš„å®ç°ç±»ï¼Œåªå…³å¿ƒå·¥å‚å’Œæ¥å£
        NotificationFactory factory = NotificationFactoryProvider.getFactory("email");
        Notification notification = factory.createNotification();
        notification.send("Hello, this is a test email!"); 
    }
}
```

å……åˆ†è¿ç”¨äº†å¤šæ€çš„ç‰¹æ€§ï¼Œå½“æˆ‘ä»¬æå‰ä¸çŸ¥é“éœ€è¦é‚£ç§é€šçŸ¥æ–¹å¼æ—¶ï¼Œé€šè¿‡ä½¿ç”¨å·¥å‚æ–¹æ³•ï¼Œåœ¨è¿è¡Œç¯å¢ƒä¸­åŠ¨æ€è°ƒèŠ‚æˆ‘ä»¬ç”Ÿäº§çš„äº§å“ã€‚

## æ˜“æ‰©å±•æ€§

æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­é€šè¿‡è¿™ä¸ªä¾‹å­ä½“ç°å·¥å‚æ–¹æ³•çš„æ˜“æ‰©å±•æ€§ï¼š

### æ–°å¢å¾®ä¿¡é€šçŸ¥

å·¥å‚æ–¹æ³•çš„ç”Ÿäº§æ–¹å¼åœ¨å¢åŠ ç±»å‹æ—¶ï¼ŒåªåŠ¨ç±»ï¼Œä¸æ‡‚å®¢æˆ·ç«¯ã€‚å³ä¸éœ€è¦ä¿®æ”¹Mainå‡½æ•°ä¸­çš„å†…å®¹ã€‚

æˆ‘ä»¬å…ˆæ–°å¢å¾®ä¿¡é€šçŸ¥è¿™ä¸ªäº§å“ï¼š

```java
class WeChatNotification implements Notification {
    public void send(String message) {
        System.out.println("å‘é€å¾®ä¿¡: " + message);
    }
}
```

ç„¶åå¢åŠ å¾®ä¿¡ç±»çš„åˆ›å»ºå·¥å‚ï¼š

```java
class WeChatFactory extends NotificationFactory {
    public Notification createNotification() {
        return new WechatNotification();
    }
}
```

ç„¶åæˆ‘ä»¬åœ¨å·¥å‚é€‰æ‹©å™¨ä¸­å¢åŠ å¾®ä¿¡é€‰é¡¹ï¼š

```java
NotificationFactoryProvider {
    public static NotificationFactory getFactory(String type) {
        switch (type.toLowerCase()) {
            case "email": return new EmailFactory();
            case "sms": return new SMSFactory();
	    case "wechat": return new WeChatFactory;	//åªéœ€å¢åŠ è¿™ä¸€è¡Œ
            default: throw new IllegalArgumentException("æœªçŸ¥é€šçŸ¥ç±»å‹");
        }
    }
}

```

è¿™æ ·å½“å®¢æˆ·ç«¯æ¥æ”¶åˆ°å­—æ®µwechatæ—¶ï¼Œå°±ä¼šç”Ÿæˆå¾®ä¿¡å·¥å‚ï¼Œå¹¶ç”Ÿæˆå¾®ä¿¡äº§å“ã€‚

# ç®€å•å·¥å‚

å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œä¼¼ä¹å¹¶ä¸èƒ½å¾ˆå¥½çš„åˆ©ç”¨åˆ°å·¥å‚æ–¹æ³•çš„ç‰¹æ€§ï¼Œåè€Œè®©ç¨‹åºè¿‡åº¦å°è£…æ˜¾å¾—å†—æ‚ã€‚å› æ­¤æˆ‘ä»¬å¼•å…¥ç®€å•å·¥å‚ï¼Œä½œä¸ºåœ¨ç›¸å¯¹ç®€å•çš„æƒ…å†µä¸­ä½¿ç”¨ï¼š

```java
interface Notification {
    void send(String message);
}
class EmailNotification implements Notification {
    public void send(String message) {
        System.out.println("å‘é€é‚®ä»¶: " + message);
    }
}

class SMSNotification implements Notification {
    public void send(String message) {
        System.out.println("å‘é€çŸ­ä¿¡: " + message);
    }
}

public class Main {
    public static void main(String[] args) {
        //å®¢æˆ·ç«¯ä¸å…³å¿ƒå…·ä½“çš„å®ç°ç±»ï¼Œåªå…³å¿ƒå·¥å‚å’Œæ¥å£
        String type = "email"; // å¯ä»¥æ˜¯ "email" æˆ– "sms"
        Notification notification = createNotification(type);
        notification.send("Hello, this is a test message!");
    }
    public static Notification createNotification(String type) {
        switch(type) {
            case "email":
                return new EmailNotification();
            case "sms":
                return new SMSNotification();
            default:
                throw new IllegalArgumentException("Unknown notification type: " + type);
        }
    }
}

```

çœå»äº†ç»™æ¯ä¸ªå•†å“åˆ›å»ºå·¥å‚çš„æ­¥éª¤ï¼Œä½¿ç”¨ä¸€ä¸ªå¤§å·¥å‚ç›´æ¥ç”Ÿæˆå¯¹åº”å•†å“ã€‚

# æŠ½è±¡å·¥å‚(Abstract Factroy)

æŠ½è±¡å·¥å‚æ˜¯å·¥å‚æ–¹æ³•çš„å‡çº§ç‰ˆï¼Œä½¿ç”¨äº**ä¸€ç»„**äº§å“çš„åˆ›å»ºã€‚

## è·¨å¹³å°çš„GUIæ¡†æ¶

å¦‚æœæˆ‘ä»¬æƒ³è¦å¼€å‘ä¸€ä¸ªè·¨å¹³å°çš„GUIæ¡†æ¶ï¼Œå¯ä»¥ç”Ÿæˆ:

* æŒ‰é’®(Button)
* è¾“å…¥æ¡†(Textbox)

ç”±äºWindowsç³»ç»Ÿå’ŒMacç³»ç»ŸUIé£æ ¼ä¸ä¸€è‡´ï¼Œä½ å¸Œæœ›ï¼š

* åœ¨Windowç³»ç»Ÿä¸‹ä½¿ç”¨Windowsé£æ ¼ç»„ä»¶
* åœ¨Macç³»ç»Ÿä¸‹ä½¿ç”¨Macé£æ ¼çš„ç»„ä»¶

### ç¬¬ä¸€æ­¥ï¼šæŠ½è±¡äº§å“æ—

æˆ‘ä»¬ç»™æ¯ä¸€ä¸ªäº§å“åˆ›å»ºä¸€ä¸ªæ¥å£ï¼š

```java
// æŠ½è±¡äº§å“Aï¼šæŒ‰é’®
interface Button {
    void render();
}

// æŠ½è±¡äº§å“Bï¼šæ–‡æœ¬æ¡†
interface Textbox {
    void render();
}

```

### ç¬¬äºŒæ­¥ï¼šå…·ä½“äº§å“å®ç°(Macå’ŒWindowsä¸¤ç§é£æ ¼)

```java
class WindowsButton implements Button {
    public void render() {
        System.out.println("æ¸²æŸ“ Windows é£æ ¼æŒ‰é’®");
    }
}

class WindowsTextbox implements Textbox {
    public void render() {
        System.out.println("æ¸²æŸ“ Windows é£æ ¼æ–‡æœ¬æ¡†");
    }
}

class MacButton implements Button {
    public void render() {
        System.out.println("æ¸²æŸ“ Mac é£æ ¼æŒ‰é’®");
    }
}

class MacTextbox implements Textbox {
    public void render() {
        System.out.println("æ¸²æŸ“ Mac é£æ ¼æ–‡æœ¬æ¡†");
    }
}

```

### ç¬¬ä¸‰æ­¥ï¼šæŠ½è±¡å·¥å‚æ¥å£

```java
interface GUIFactory {
    Button createButton();
    Textbox createTextbox();
}
```

### ç¬¬å››æ­¥ï¼šå…·ä½“å·¥å‚ç±»

```java
class WindowsFactory implements GUIFactory {
    public Button createButton() {
        return new WindowsButton();
    }

    public Textbox createTextbox() {
        return new WindowsTextbox();
    }
}

class MacFactory implements GUIFactory {
    public Button createButton() {
        return new MacButton();
    }

    public Textbox createTextbox() {
        return new MacTextbox();
    }
}

```

### ç¬¬äº”æ­¥ï¼šå®¢æˆ·ç«¯ä½¿ç”¨(ä¸å…³å¿ƒå…·ä½“äº§å“æ˜¯å“ªä¸€å¥—)

```java
public class Main {
    public static void main(String[] args) {
        GUIFactory factory = getFactory("mac");  // æˆ– "windows"
      
        Button button = factory.createButton();
        Textbox textbox = factory.createTextbox();

        button.render();
        textbox.render();
    }

    public static GUIFactory getFactory(String type) {
        if (type.equalsIgnoreCase("windows")) {
            return new WindowsFactory();
        } else if (type.equalsIgnoreCase("mac")) {
            return new MacFactory();
        } else {
            throw new IllegalArgumentException("ä¸æ”¯æŒçš„ç±»å‹");
        }
    }
}

```
