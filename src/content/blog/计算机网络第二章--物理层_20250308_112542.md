---
title: 计算机网络第二章--物理层
date: 2025-03-08 11:25:42
categories: 笔记
tags: 计算机网络
---
# 每日一言

[To Kira] You are the dream of humanity, the Ultimate Coordinator. It was in pursuit of that dream that Dr. Hibiki created the artificial womb. And you are the only viable child it ever produced. For that result, a very large number of your siblings were sacrificed. -- Rau Le Creuset
from Mobile Suit Gundam SEED

<!-- more -->

# Basis for data communication 数据通信基础

### Analog(模拟) and Digital(数字) Data

Analog Data: 在一段时间内具有连续的值

Digital Data: 具有离散的值

## Analog and Digital Signal

信号是数据的载体

* Analog Signal: a continuously varying electromagnetic wave 连续变化电磁波
* Digital Signal: a sequence of voltage pulses 电压脉冲序列

无论是模拟数据还是数字数据都能调制或编码成**模拟信号**或**数字信号**

Transmission Impairment 传输损伤

Analog ： degradation(退化) of signal quality

Digitai ： bit errors

## 信道性能相关的基本概念

* `Bit Rate` 数据率：数据传输速率:bps
* `Baud Rate` 波特率：每秒传输码元(符号)的个数，码元是承载信息的基本信号单元，一个码元承载信息量由脉冲信号所能表示的有效状态(信号的电平)数M决定

  M个电平级数，则一个码元可以表示$log_2 M$ 个bit
* `Channel Capacity` 信道容量：信道的最大数据率
* `Throughput` 吞吐量：网络容量的度量，表示单位时间内网络可以传送的数据位数(bps)
* `BER(Bit Error Rate)` 误码率：信道传输可靠性指标 $ P = 传输错的位数/传输总位数 $

### 区分Bit Rate and Baud Rate

Bit Rate = Baud Rate *$log_2 M$

![1741570716576](image/计算机网络第二章--物理层_20250308_112542/1741570716576.webp)

M = 2，比特率：8 bps，波特率：8

![1741570928363](image/计算机网络第二章--物理层_20250308_112542/1741570928363.webp)

M = 4 ，比特率：16bps，波特率：8。每秒仍然传输八个信号，但是由于脉冲信号可以表示4个状态，我们可以给每个状态进行编码，所以每个波能够传送2个bit位。

## 信道容量

* 信道带宽
* 无噪声信道的最大数据率
* 有噪声信道的最大数据率

### Bandwidth 信道带宽

* No transmission facility can transmit signal without **losing some power**
* `Any transmission system has a limited band of frequencies` 每个传输系统都有一个有限的频带
* `Range of frequencies transmitted without being strongly attenuated is called bandwidth` 在没有强烈衰减的情况下传输的频率范围称为带宽
* `Bandwidth is a physical property of the transmission medium,depends on` 带宽是传输介质的物理属性，取决于以下因素
  * Construction (构造)
  * Thickness (厚度)
  * Length (长度)

#### 时域图与频域图

频域图：

![1741573064223](image/计算机网络第二章--物理层_20250308_112542/1741573064223.webp)

时域图：

![1741573109867](image/计算机网络第二章--物理层_20250308_112542/1741573109867.webp)

#### 低通(Low-pass)和带通(Band-pass)

低通：(从0开始的范围)

![1741573159887](image/计算机网络第二章--物理层_20250308_112542/1741573159887.webp)

带通：
![1741573207412](image/计算机网络第二章--物理层_20250308_112542/1741573207412.webp)

## Maximum capacity : noiseless channel (无噪声通道的最大数据率)

* `Nyquist proved that : if an arbitrary(任意的) signal has been run through a low-pass filter(过滤器) of bandwidth B, the filtered signal can be completely reconstructed(重建) by making only 2B samples(样本) per second.`
* `Given binary signal, data rate supported by B Hz is 2B bps.`

奈奎斯特定理：$C = 2B log_2 M $

* C单位：bps
* B单位：Hz

此式表明，对于给定的带宽可以通过增加信号取值的状态数M来提高信道容量。但是会加重接收器的负担。即在每个信号码元的时间内，必须从M个可能的状态中区分出一个来，降低了可靠性。

## Maximum capacity : noisy channel (有噪声通道的最大数据率)

Shannon Theorem (香农定理)：`the theoretical(理论) highest data rete for a noisy channel `

$$
C = B \log_2 \left( 1 + \frac{S}{N} \right)
$$

![1745238573015](image/202212-2 CCF/计算机网络第二章--物理层_20250308_112542/1745238573015.webp)

* C单位：bps
* B单位：Hz，为信道带宽
* $(S/N)_{db}$ ：平均信号噪声功率比，信噪比，单位：db(分贝)
* S：接收信号功率
* N：噪声功率

提升信道容量的方式：

* 增加系统带宽
* 提升源端信号发射功率
* 降低噪声

例题：

![1741575062161](image/计算机网络第二章--物理层_20250308_112542/1741575062161.webp)

## 传输方式分类

按传输方向和传输时间分

* Simplex 单工
  * Transmission occurs in only one direction
* Half-duplex 半双工
  * `Transmission can be made in both direction, but at one time only one direction is avaliable `传输可以在两个方向上进行，但在同一时间只有一个方向是可用的。
* Full-duplex 全双工
  * `Transmission can be made in both directions simultaneously(同时的)`

按传输数据的时空顺序分：

并行传输(Parallel transmission):

![1741576016206](image/计算机网络第二章--物理层_20250308_112542/1741576016206.webp)

串行传输：(Serial transmission):

![1741576105439](image/计算机网络第二章--物理层_20250308_112542/1741576105439.webp)

按照收/发两端实现同步的方法，传输可以分为两类：

Asynchronous transmission:

![1741576184114](image/计算机网络第二章--物理层_20250308_112542/1741576184114.webp)

Synchronous transmission:

![1741576197176](image/计算机网络第二章--物理层_20250308_112542/1741576197176.webp)

### 同步串行传输和异步串行传输

* 异步串行传输
  * **独立时钟无需同步**
  * 以字符为单位进行传输
  * 发送两个字符之间的间隔是任意的
  * 接收方依靠字符中的起始符和停止符来同步
* 同步串行传输
  * 以**时钟信号线**对传输的数据线上的信号进行比特同步
  * 以数据块（帧或分组）为单位传输

# Transmission medium 传输介质

定义：传输介质是指发送器与接收器之间的物理通路。

分类：

* Guided Transmission Media(引导性传输介质)
* Unguide Tranmission Media(非引导型传输介质)

## Guide Transmission Media

* `Magnetic Media`磁介质
* `Twisted Pair`双绞线
* `Coaxial Cable`同轴电缆
* `Power line电`力线
* `Fiber Optics`光纤

### Magnetic Media

优点：

* 储存容量大
* 运输成本低
* 物理运输传输带宽低

### Twisted Pair

Most common transmission media, can be used for transmitting ether analog or digital signal.

组成：

* Consists of two insulated(绝缘的) copper(铜) wires, about 1 mm thick, the wires are **twisted together** in a helical(螺旋状的) form.

优点：

* 平行导线会形成天线，而双绞线中两根导线产生的波相互抵消，减少信号辐射，降低串扰。
* 带宽取决于导线粗细、传输距离和每米的**绞合次数**，在几千米范围内可达到几兆比特每秒 。

分类：

* UTP：无屏蔽双绞线
* STP：屏蔽双绞线

3类导线和5类导线的区别：单位长度的绞合次数不同

![1741661774346](image/计算机网络第二章--物理层_20250308_112542/1741661774346.webp)

### Coaxial Cable

组成：（由里向外）

* 铜制线芯
* 绝缘材料
* 网状外导体
* 塑料保护外套

![1741661955440](image/计算机网络第二章--物理层_20250308_112542/1741661955440.webp)

优点：

* Better shielding(屏蔽性) and greater bandwidth，带宽高达1GHz
* **`Excellent noise immunity` **抗噪性极佳

分类：

* 50-ohm cable：used for **digital transmission**
* 75-ohm cable：used for **analog transmission** and `cable television` 有限电视

### Power line

既可以在家庭内部作为局域网使用，也能在家庭外部用于宽带互联网接入，原本设计用于分配电力信号。

传输原理：

* 借助现有的电力线，通过载波方式对模拟或数字信号进行高速传输。

优点：

* 优点包括投资少、连接便捷、传输速率高、安全性好、使用范围广。

缺点：

* 缺点是受家庭电器电磁波干扰等因素影响，无法提供高质量的数据传输业务。

### Fiber Cables

网络骨干的长途传输，高速Lan，光纤到户

组成：

* 双层或多层同心圆柱体
  ![1741663015492](image/计算机网络第二章--物理层_20250308_112542/1741663015492.webp)

原理：纤芯折射率大于包层的折射率，最终造成**全反射**。

## Unguided/Wireless transmission media

* `Radio transmission`无线电传输
* `Microwave transmission`微波传输
* `Infrared transmission`红外传输
* `Satellite communication`卫星通信

分类：

* Narrow frequency band(窄频带)：常用于广播、电视等传输
* Spread Spectrum(扩频)：应用于蓝牙、无线局域网（WLAN）、码分多址（CDMA）等场景。

### Radio Transmission

VLF, LF and MF bands：线电波会沿着地球的曲率传播，传播距离可达 1000 千米。

HF band：无线电波会在距离地面 100 至 500 千米的电离层发生反射来进行传播 。

![1741663933700](image/计算机网络第二章--物理层_20250308_112542/1741663933700.webp)

### Microwave Transmission(100M~10GHz)

在光纤出现之前，微波传输系统是长距离电话通信系统的核心。

特点：

* 微波沿直线传播，接收器与发射器必须对准
* 远距离通信采取中继的方法，一般相隔**80km**

缺点：

* 径衰落是常见的严重问题，受天气和频率影响，例如在约 4GHz 频段时，微波易被雨水吸收 。

### Infrared Transmission

Widely used for short-range communication.

优点：

* 关系直接
* 价格便宜
* 使用红外传输不需要政府审批

缺点：

* 无法穿过固体

### Communication Satellites

像是一个在空中的巨大的microwave repeater(中继器)

`Transponder`转发器：

* `listen to some portion(部分) of the specturm(频谱)`监听频谱中的特定部分
* amplifies(放大) the incoming signals
* rebroadcasts(重播) it at ` another frequency`

Downward beams **下行波束类型**:

* broad 扩波：覆盖地球表面相当大的一部分区域。
* Narrow窄波：即点波束，覆盖直径为数百千米的区域

# Digital modulation and multiplexing数字调制与多路复用

Digital transmission transmission needs a low-pass channel.

分类：

* Baseband transmission(基带传输)：不搬移信号频谱的传输。（直接传输**数字信号**，需要编码）
* Passband transmission(通带传输)：利用调制解调器搬移信号频谱的传输。（数字信号调制成**模拟信号**）

搬移频谱的目的是为了适应信道的频率特性。

## Baseband transmission: line codes(线路编码)

* **NRZ**
* **NRZI**
* **Manchester**
* AMI

重点需要掌握前三种线路编码，要能够根据传输的数据画出数据图像

### NRZ(Non-Return to Zero)

不归零编码

* 1 = high level
* 0 = low level

存在问题：难以分辨一位的开始和另一位的结束，发送方和接收方必须有同步时钟。

![1741677087794](image/计算机网络第二章--物理层_20250308_112542/1741677087794.webp)

### NRZI(Non-Return to Zero Inverted)

不归零逆转码

* 1 = make transition(翻转)
* 0 = remain the same(保持原来的状态)

![1741677401377](image/计算机网络第二章--物理层_20250308_112542/1741677401377.webp)

问题：连续传输多个0时，仍然需要时钟对齐。

### Manchester

曼彻斯特编码

Transition in middle of each bit period 在每个比特周期的中间进行跳变

* 1 = low-to-high
* 0 = high-to-low

Transition serves as clock and data 跳变同时作为时钟信号和数据

![1741678567354](image/计算机网络第二章--物理层_20250308_112542/1741678567354.webp)

优点：解决了时钟偏移(**clock skew**)问题

缺点：Half data rate of NRZ

## Passband Transmission

通带传输：载波信号

* ASK 幅移键控
* FSK 频移键控
* PSK	相移键控
  * BPSK:二进制相移键控，2种相位
  * QPSK:正交相移键控，4种相位
* QAM 正交调幅

![1741679122550](image/计算机网络第二章--物理层_20250308_112542/1741679122550.webp)

### QPSK & QAM

星座图：

* The phase of a dot: the angle from it to the origin makes with the positive x-axis。
* The amplitude of a dot: the distance from the origin
* 点的相位：点和原点的连线与x轴正半轴的夹角
* 点的振幅：与原点的距离

![1741679778410](image/计算机网络第二章--物理层_20250308_112542/1741679778410.webp)

## Multiplexing 复用

* TDM(时分复用)
* FDM(频分复用)
* CDM(码分复用)

### Time Division Multiplexing

信号看似同时作为子信道在一个通信信道中传输，但实际上是在信道上轮流传输。时域被划分为若干个固定长度的重复时隙，每个子信道占用一个时隙。

特点：

* 所有用户在不同时间占用相同的频带宽度。

![1741680274753](image/计算机网络第二章--物理层_20250308_112542/1741680274753.webp)

缺点：线路利用率低，哪怕线路并没有传输数据，却依然占据一定的份额。

#### Statistical Time Division Multiplexing

统计时分复用：动态的按需分配公用信道的时隙，提高信道利用率。

### Frequency Division Multiplexing

![1741680445835](image/计算机网络第二章--物理层_20250308_112542/1741680445835.webp)

频分复用将整个带宽分为多份。用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。

频分复用的所有用户在同样的时间占用不同的**带宽资源(频率带宽而非发送速率)**。

### Code Division Multiplexing

Code Division Multiple Access(CDMA):每个站点可以随时在整个频谱上进行传输。多个同时进行的传输通过编码理论来区分，各个用户使用经过特殊挑选的不同码型，相互之间不会产生干扰。

#### Code Division Multiplexing Access 码分多址

* 所有码片序列两两正交
* 当做个站点同时传输时，它们的双极性信号线性相加，假设相加后的信号为S
* 接收方恢复某站(码片序列C)的数据：计算接收到的码片序列S*C的归一化内积
  * 如果结果为1，则接收到的比特是1
  * 如果结果是-1，则接收到的比特是0
  * 如果结果为0，则发送方没有发送数据

假设有如下码片：

![1741682249543](image/计算机网络第二章--物理层_20250308_112542/1741682249543.webp)

当信号为S = B+C：`(-2,0,0,0,2,2,0,-2)`

接收端要译出C发送的信号：则S * C = `[2+0+0+0+2+2+0+2]/8` = 1 , 则C发送了一个信号1

当信号为S = A+B：`(-2,-2,0,0,2,0,2,0)`

S*C = `[2-2+0+0+2+0-2+0]/8` = 0 则C未发送信号

我们可以总结出如下方法：

1. 首先算出信号S各个分量大小(线性相加)
2. 计算S与对应信号片的内积
3. 根据计算结果判断信号

# PSTN(公共电话网) and ADSL(非对称用数字用户线)

## Structure of Telephone System 电话系统的结构

一条典型的中距离通话电路路线:

![1741694741922](image/计算机网络第二章--物理层_20250308_112542/1741694741922.webp)

* Local loop (本地环路): Analog twisted pairs going to houses and businesses. (传输模拟信号)
* 其他线路传输数字信号

## Modems and Codecs调制解调器和编解码器

The use of both analog and digital transmission for computer to computercall.Conversion is done by the modems and codecs.

![1741695186658](image/计算机网络第二章--物理层_20250308_112542/1741695186658.webp)

调制解调器：主要功能是实现模拟信号和数字信号之间的转换。

编解码器：主要功能是对数字信号进行编码和解码。

### 两个本地回路

![1741695796985](image/计算机网络第二章--物理层_20250308_112542/1741695796985.webp)

Modems：2400 baud/sec

### 一个本地回路

![1741695881739](image/计算机网络第二章--物理层_20250308_112542/1741695881739.webp)

Modems：8000 baud/sec

**V.90(56kbps)**

每个电话信道带宽**4000Hz**

## 模拟数据的数字传输

数字化语音信号PCM：**Pulse Code Modulation(脉冲编码调制) 重要！！！**

设备：Codec 编码解码器

Procedures(步骤):

* **Sampling(采样)**
* **Quantizing(量化)**
* **Encoding(编码)**

### 美日方案T1

![1742199929002](image/计算机网络第二章--物理层_20250308_112542/1742199929002.webp)

T1方案采取时分复用计数，每个通道每次采样可以传输8bits，其中7bits为数据位，一个信号位。

![1741696585820](image/计算机网络第二章--物理层_20250308_112542/1741696585820.webp)

一帧：24个通道+1bit

一个通道：8bit

一帧的数据大小：$ 24 * 8 + 1 = 193bits $

电话信道的带宽：4000Hz，则需要最少样本数为8000.

所以得出速率为：8000*193 = 1.544Mbps

### 我国方案E1

32 channels,30 for user data ,2 for control data.

速率：$32*8 * 8000 = 2.048 Mbps$

## 宽带接入技术

### ADSL技术

非对称数字用户线ADSL(Asymmetric Digital Subscriber Line)：对现有的模拟电话用户线进行改造，使他能够承受宽带业务，是一种宽带接入技术。

原理：

* 模拟电话的频带被限制在300~3400Hz的范围内，但用户线本身可以通过的信号频率仍然超过1MHz
* ADSL:把0~4kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用。

![1741697735398](image/计算机网络第二章--物理层_20250308_112542/1741697735398.webp)

重点：不对称是指，**上下行带宽不对称**，通常下行带宽远大于上行带宽。

### ADSL Modulation Scheme 调制方案

**Discrete Multitone Modulation (DMT) 离散多音调制**

特点：

* 将1.1MHz 分成**256** 个通道
* 通道0用作电话信道
* 1-5通道并不使用，防止声音信号与数据信号相互干扰
* 250 个通道用于上网

  * 1 个通道用于Upstream control
  * 1 个通道用于Downstream control
  * 248个通道用于传输数据
* **子信道调制方式** ：每个子信道采用类似 V.34 的调制方案。

  * **采样率** ：采样率为 4000 波特 。
  * **线路质量监控** ：持续监控每个信道的线路质量，并据此动态调整数据传输速率，以保证传输的稳定性和效率。
  * **实际数据传输** ：实际数据采用正交幅度调制（QAM）方式发送，每波特最多可传输 15 比特的数据。

# 本章重点

![1741698561590](image/计算机网络第二章--物理层_20250308_112542/1741698561590.webp)
