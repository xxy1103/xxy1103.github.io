---
import CustomCursor from './CustomCursor.astro';
import { headerGithubRepoUrl, profileConfig, siteTitle } from '../config';

const today = new Date();

const socials = profileConfig.socials.filter((item) => item.url.trim().length > 0);

function resolveSocialUrl(key: string, url: string) {
	if (key === 'email' && !url.startsWith('mailto:')) {
		return `mailto:${url}`;
	}
	return url;
}
---

<footer transition:animate="none">
	<p class="copyright">&copy; {today.getFullYear()} {profileConfig.name}. Powered by {siteTitle}.</p>
	<div class="social-links">
		{socials.map((social) => (
			<a
				href={resolveSocialUrl(social.key, social.url)}
				target={social.key === 'email' ? undefined : '_blank'}
				rel={social.key === 'email' ? undefined : 'noreferrer'}
			>
				{social.label}
			</a>
		))}
		{headerGithubRepoUrl && (
			<a href={headerGithubRepoUrl} target="_blank" rel="noreferrer">Repository</a>
		)}
	</div>
</footer>

<style>
	footer {
		padding: 2em 1em 6em 1em;
		background: linear-gradient(var(--gray-gradient)) no-repeat;
		color: rgb(var(--gray));
		text-align: center;
	}

	.copyright {
		margin: 0;
		font-size: 0.95em;
	}

	.social-links {
		display: flex;
		justify-content: center;
		gap: 0.85em;
		flex-wrap: wrap;
		margin-top: 0.85em;
	}

	.social-links a {
		text-decoration: none;
		color: rgb(var(--gray));
		font-size: 0.92em;
		padding: 0.25em 0.55em;
		border-radius: 999px;
		border: 1px solid rgba(var(--gray), 0.2);
		transition: color 0.2s ease, border-color 0.2s ease;
	}

	.social-links a:hover {
		color: rgb(var(--gray-dark));
		border-color: rgba(var(--gray-dark), 0.28);
	}
</style>

<CustomCursor />
